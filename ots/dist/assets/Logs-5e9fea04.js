import{j as s,r as i,a as g,$ as v,bp as b,A as L,I as f,bq as w,R as h}from"./index-1a1a81e1.js";import{C as N}from"./ContentFrame-677dbbad.js";import{T as P,M as j}from"./ModeTab-f1bdf5da.js";import{S as F,D as C}from"./StandardTextarea-bdaa3e9b.js";import{J as l}from"./NavTab-e6699f77.js";import"./description-ca773d3c.js";import"./hidden-7488b6ab.js";import"./TransactionAddress-8c728d33.js";import"./AddressHighlighter-79fb858b.js";import"./StandardSelectionBoundary-204c519a.js";import"./DecoratedAddressLink-fc50b0da.js";import"./useErigonHooks-c9b7ed80.js";import"./useBlockTagContext-c84d8bd0.js";const D=({idx:e})=>s.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-emerald-50 text-emerald-500",children:e}),R=({event:e})=>s.jsxs("span",{className:"font-mono",children:[s.jsx("span",{className:"font-bold text-blue-900",children:e.name}),"(",e.inputs.map((t,n)=>s.jsxs("span",{children:[n>0?", ":"",s.jsx("span",{children:t.format?t.format("full"):`${t.type} ${t.name}`})]},n)),")",e.anonymous?" anonymous":""]}),T=i.memo(R),c=({leftPanel:e,children:t})=>s.jsxs("div",{className:"flex items-baseline space-x-3 text-sm",children:[s.jsx("div",{className:"w-20 text-right",children:e}),s.jsx("div",{className:"flex w-full flex-col items-start space-y-2",children:t})]}),$=({idx:e,data:t})=>s.jsxs("span",{className:"flex items-center space-x-2 font-mono",children:[s.jsx("span",{className:"rounded bg-gray-100 px-2 py-1 text-xs text-gray-500",children:e}),s.jsx("span",{children:t})]}),S=({topics:e,data:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{leftPanel:"Topics",children:e.map((n,r)=>s.jsx($,{idx:r,data:n},r))}),s.jsx(c,{leftPanel:"Data",children:s.jsx(F,{value:t})})]}),I=async e=>{try{const t=await fetch(e);return t.ok?{signatures:(await t.text()).split(";")}:(console.error(`Signature does not exist in topic0 DB: ${e}`),null)}catch(t){return console.error(`Couldn't fetch signature URL ${e}`,t),null}},E=e=>{var a;if(e.length!==66||!e.startsWith("0x"))throw new Error(`rawTopic0 must contain a 32 bytes hex event signature starting with 0x; received value: "${e}"`);const n=(a=i.useContext(g).config)==null?void 0:a.assetsURLPrefix,r=e.slice(2),d=()=>n===void 0?null:b(n,r),{data:o,error:m}=v(d,I);return m?null:o},M=({log:e})=>{const{provider:t}=i.useContext(g),n=L(e.address,t==null?void 0:t.network.chainId),r=i.useMemo(()=>{if(!n)return n;const x=n.metadata.output.abi,u=new f(x);try{return u.parseLog({topics:e.topics,data:e.data})}catch(p){return console.warn("Couldn't find function signature",p),null}},[e,n]),d=e.topics[0],o=E(d),m=i.useMemo(()=>{if(!o)return o;if(!o.signatures)return;const x=o.signatures;for(const u of x){const p=w.fromString(`event ${u}`),y=new f([p]);try{return y.parseLog(e)}catch{}}},[o,e]),a=r??m;return s.jsxs("div",{className:"flex space-x-10 py-5",children:[s.jsx("div",{children:s.jsx(D,{idx:e.logIndex})}),s.jsxs("div",{className:"w-full space-y-2",children:[s.jsx(c,{leftPanel:s.jsx("span",{className:"font-bold",children:"Address"}),children:s.jsx(P,{address:e.address})}),s.jsxs(l.Group,{children:[s.jsx(l.List,{as:h.Fragment,children:s.jsx(c,{leftPanel:"Parameters",children:s.jsxs("div",{className:"mb-1 flex space-x-1",children:[s.jsx(j,{children:"Decoded"}),s.jsx(j,{children:"Raw"})]})})}),s.jsxs(l.Panels,{as:h.Fragment,children:[s.jsx(l.Panel,{children:a===void 0?s.jsx(c,{children:"Waiting for data..."}):a===null?s.jsx(c,{children:"Can't decode data"}):s.jsxs(c,{children:[s.jsx(T,{event:a.eventFragment}),s.jsx(C,{args:a.args,paramTypes:a.eventFragment.inputs,hasParamNames:a===r})]})}),s.jsx(l.Panel,{as:h.Fragment,children:s.jsx(S,{topics:e.topics,data:e.data})})]})]})]})]})},W=i.memo(M),A=({logs:e})=>s.jsx(N,{tabs:!0,children:e&&s.jsx(s.Fragment,{children:e.length>0?s.jsx(s.Fragment,{children:e.map((t,n)=>s.jsx(W,{log:t},n))}):s.jsx("div",{className:"py-4 text-sm",children:"Transaction didn't emit any logs"})})}),Z=i.memo(A);export{Z as default};
