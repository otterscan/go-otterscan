import{a0 as b,j as e,a1 as T,a2 as E,r as n,F as l,a3 as k,a4 as I,a5 as u,a6 as F,a7 as A,a8 as C,a9 as f,aa as R,ab as L,ac as N,ad as w,ae as v,N as _,af as B,ag as P,ah as y,f as z,b as $,ai as O,aj as M,T as H}from"./index-1a1a81e1.js";import{S as D}from"./StandardFrame-33bf0827.js";import{S as U,C as V}from"./ContentFrame-677dbbad.js";import{N as W}from"./NavBlock-c6c0f531.js";import{S as Y}from"./StandardSelectionBoundary-204c519a.js";import{S as q}from"./StandardTable-fcc6bf4d.js";import{S as G,a as J}from"./StandardTBody-bb7ced43.js";import{I as p}from"./InfoRow-bba0e2d4.js";import{C as d}from"./react-content-loader.es-44cea70a.js";import{S as x,C as h,B as K,A as Q,R as g,a as X}from"./SlashingCount-e74a8791.js";import{B as Z}from"./BlockLink-7a655877.js";import"./NavButton-d3ad74da.js";import"./HexValue-ca7ab322.js";import"./PercentageBar-a372b68a.js";import"./FormattedBalance-4d723175.js";const ee=({epochNumber:s})=>{const t=b();return e.jsx(e.Fragment,{children:t!==void 0&&e.jsx(W,{entityNum:s,latestEntityNum:t+T,urlBuilder:E})})},se=({epochNumber:s})=>e.jsx(U,{children:e.jsxs("div",{className:"flex items-baseline space-x-1",children:[e.jsx("span",{children:"Epoch"}),e.jsxs("span",{className:"text-base text-gray-500",children:["#",s]}),e.jsx(ee,{epochNumber:s})]})}),te=n.memo(se),ae=()=>e.jsxs("span",{className:"flex w-min items-baseline space-x-1 rounded-lg bg-emerald-50 px-3 py-1 text-xs text-emerald-500",children:[e.jsx(l,{className:"self-center",icon:k,size:"1x"}),e.jsx("span",{children:"Yes"})]}),ne=n.memo(ae),re=()=>e.jsxs("span",{className:"flex w-min items-baseline space-x-1 rounded-lg bg-amber-50 px-3 py-1 text-xs text-amber-500",children:[e.jsx(l,{className:"self-center",icon:I,size:"1x"}),e.jsx("span",{children:"No"})]}),oe=n.memo(re),ie=1e3,ce=6e4,de=60,le=({timestamp:s})=>{const[t,a]=n.useState(new Date),r=n.useCallback(c=>{a(j=>j.getTime()>c.getTime()?j:c)},[a]),o=Math.round(t.getTime()/1e3)-s;return Math.abs(o)<=de?e.jsx(he,{setLast:r,durationInSecs:o}):e.jsx(me,{setLast:r,durationInSecs:o})},xe=({children:s})=>{const t=u(ie),a=u(ce);return e.jsx(F.Provider,{value:t,children:e.jsx(A.Provider,{value:a,children:s})})},he=({setLast:s,durationInSecs:t})=>{const a=C();return n.useEffect(()=>{s(a)},[a]),e.jsx(f,{durationInSecs:t})},me=({setLast:s,durationInSecs:t})=>{const a=R();return n.useEffect(()=>{s(a)},[a]),e.jsx(f,{durationInSecs:t})},je=n.memo(le),m=({slotNumber:s})=>{const t=L(s);return t===void 0?e.jsx(e.Fragment,{}):e.jsx(je,{timestamp:t})},ue=({slotNumber:s})=>{const t=w(s),a=N(t),r=a&&parseInt(a==null?void 0:a[s]);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(x,{slotNumber:s,scheduled:!0})}),e.jsx("td",{children:e.jsx(d,{viewBox:"0 0 30 4",children:e.jsx("rect",{x:"0",y:"0",rx:"1",ry:"1",width:"30",height:"4"})})}),e.jsx("td",{}),e.jsx("td",{children:e.jsx(m,{slotNumber:s})}),r!==void 0?e.jsx("td",{children:e.jsx(h,{validatorIndex:r})}):e.jsx("td",{className:"self-center",children:e.jsx(d,{viewBox:"0 0 60 15",width:60,height:15,children:e.jsx("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"60",height:"15"})})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]})},pe=n.memo(ue),ge=({slotNumber:s,missed:t,scheduled:a,isValidating:r})=>{const i=w(s),o=N(i),c=o&&parseInt(o==null?void 0:o[s]);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(x,{slotNumber:s,missed:t,scheduled:a})}),e.jsxs("td",{className:`${r?"italic text-gray-400":""}`,children:[t&&"Missed",a&&"Scheduled"]}),e.jsx("td",{children:"-"}),e.jsx("td",{children:e.jsx(m,{slotNumber:s})}),c!==void 0?e.jsx("td",{children:e.jsx(h,{validatorIndex:c})}):e.jsx("td",{className:"self-center",children:e.jsx(d,{viewBox:"0 0 60 15",width:60,height:15,children:e.jsx("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"60",height:"15"})})}),e.jsx("td",{children:"-"}),e.jsx("td",{children:"-"}),e.jsx("td",{}),e.jsx("td",{children:"-"}),e.jsx("td",{children:"-"}),e.jsx("td",{children:"-"})]})},S=n.memo(ge),Se=({slotNumber:s,isValidating:t})=>{const a=v();return a===void 0||s>a?e.jsx(S,{slotNumber:s,isValidating:t,scheduled:!0}):e.jsx(S,{slotNumber:s,isValidating:t,missed:!0})},fe=n.memo(Se),Ne=({slotNumber:s,children:t})=>e.jsxs(_,{className:"flex items-baseline space-x-1 font-blocknum text-link-blue hover:text-link-blue-hover",to:B(s),children:[e.jsx(l,{className:"self-center",icon:P,size:"1x"}),e.jsx("span",{children:t})]}),we=n.memo(Ne),ve=({slotNumber:s})=>{const{slot:t}=y(s);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(x,{slotNumber:s,slashings:t.data.message.body.attester_slashings.length!==0||t.data.message.body.proposer_slashings.length!==0})}),e.jsx("td",{children:"Proposed"}),e.jsx("td",{children:t.data.message.body.execution_payload&&e.jsx(Z,{blockTag:parseInt(t.data.message.body.execution_payload.block_number)})}),e.jsx("td",{children:e.jsx(m,{slotNumber:s})}),e.jsx("td",{children:e.jsx(h,{validatorIndex:t.data.message.proposer_index})}),e.jsx("td",{children:e.jsx(K,{slotNumber:s})}),e.jsx("td",{children:e.jsx(we,{slotNumber:s,children:z(t.data.message.body.attestations.length.toString())})}),e.jsx("td",{className:"self-center",children:t.data.message.body.sync_aggregate&&e.jsx(Q,{hex:t.data.message.body.sync_aggregate.sync_committee_bits})}),e.jsx("td",{children:e.jsx(g,{value:t.data.message.body.deposits.length})}),e.jsx("td",{children:e.jsx(X,{slot:t})}),e.jsx("td",{children:e.jsx(g,{value:t.data.message.body.voluntary_exits.length})})]})},ye=n.memo(ve),be=({slotNumber:s})=>{const{error:t,isLoading:a,isValidating:r}=y(s);return a?e.jsx(pe,{slotNumber:s}):t?e.jsx(fe,{slotNumber:s,isValidating:r}):e.jsx(ye,{slotNumber:s})},Te=n.memo(be),De=()=>{const{epochNumber:s}=$();if(s===void 0)throw new Error("epochNumber couldn't be undefined here");const t=parseInt(s);n.useEffect(()=>{isNaN(t)||(document.title=`Epoch #${t} | Otterscan`)},[t]);const a=O(s),r=M(t),i=v(),o=n.useMemo(()=>{if(!(r===void 0||i===void 0))return r[0]<=i},[r,i]);return e.jsxs(D,{children:[e.jsx(te,{epochNumber:t}),e.jsx(Y,{children:e.jsxs(V,{children:[e.jsx(p,{title:"Finalized",children:o===void 0?"":o?e.jsx(ne,{}):e.jsx(oe,{})}),e.jsx(p,{title:"Timestamp",children:a&&e.jsx(H,{value:a})}),e.jsxs(q,{children:[e.jsxs(G,{children:[e.jsx("th",{className:"w-28",children:"Slot"}),e.jsx("th",{className:"w-24",children:"Status"}),e.jsx("th",{className:"w-24",children:"Block"}),e.jsx("th",{className:"w-32",children:"Age"}),e.jsx("th",{className:"w-24",children:"Proposer"}),e.jsx("th",{children:"Root Hash"}),e.jsx("th",{className:"w-24",children:"Attestations"}),e.jsx("th",{className:"w-48",children:"Sync Participation"}),e.jsx("th",{className:"w-24",children:"Deposits"}),e.jsx("th",{className:"w-28",children:"Slashings A/P"}),e.jsx("th",{className:"w-24",children:"Exits"})]}),e.jsx(J,{children:e.jsx(xe,{children:e.jsx(Ee,{slots:r})})})]})]},t)})]})},Ee=n.memo(({slots:s})=>e.jsx(e.Fragment,{children:s.map(t=>e.jsx(Te,{slotNumber:t},t))}));export{De as default};
